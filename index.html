<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/iru-logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>오사카여행: 일본 현지인 맛집 예약</title>
    <meta name="description" content="오사카여행 중 현지인이 추천하는 맛집을 쉽고 빠르게 예약하세요. 일본 현지인 맛집 예약 서비스로 특별한 음식 경험을 즐겨보세요." />
    <meta name="keywords" content="오사카여행, 일본현지인맛집예약, 일본현지맛집예약, 일본현지인, 오사카 맛집" />
    
    <!-- Cache Control -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <!-- セキュリティと広告ブロッカー対策 -->
    <meta name="resource-type" content="payment" />
    <meta name="referrer" content="origin" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' https: 'unsafe-inline' 'unsafe-eval'; style-src 'self' https: 'unsafe-inline'" />
    <meta name="permissions-policy" content="interest-cohort=(), payment=self https://www.paypal.com" />
    
    <!-- PayPal DNS Prefetch - 広告ブロッカー対策 -->
    <link rel="dns-prefetch" href="https://www.paypal.com" />
    <link rel="dns-prefetch" href="https://www.paypalobjects.com" />
    <link rel="preconnect" href="https://www.paypal.com" crossorigin />
    <link rel="preconnect" href="https://www.paypalobjects.com" crossorigin />
    
    <!-- PayPalリソースの読み込み -->
    <link rel="preload" href="https://www.paypalobjects.com/api/checkout.js" as="script" />
    
    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#ff9900" />
    <!-- 非推奨タグから推奨タグへ更新 -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="IRU TOMO" />
    <link rel="apple-touch-icon" href="/iru-logo.svg" />
    
    <!-- Content Type -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="content-language" content="ko" />
    
    <!-- Mobile App Deep Linking -->
    <meta name="apple-itunes-app" content="app-id=myAppStoreID" />
    <meta name="google-play-app" content="app-id=myAppPackageName" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://irutomoreservation.com/" />
    <meta property="og:title" content="오사카여행: 일본 현지인 맛집 예약" />
    <meta property="og:description" content="오사카여행 중 현지인이 추천하는 맛집을 쉽고 빠르게 예약하세요. 일본 현지인 맛집 예약 서비스로 특별한 음식 경험을 즐겨보세요." />
    <meta property="og:image" content="https://irutomoreservation.com/og-image.jpg" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://irutomoreservation.com/" />
    <meta property="twitter:title" content="오사카여행: 일본 현지인 맛집 예약" />
    <meta property="twitter:description" content="오사카여행 중 현지인이 추천하는 맛집을 쉽고 빠르게 예약하세요. 일본 현지인 맛집 예약 서비스로 특별한 음식 경험을 즐겨보세요." />
    <meta property="twitter:image" content="https://irutomoreservation.com/og-image.jpg" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://irutomoreservation.com/" />
    
    <!-- Structured Data / Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TravelAgency",
      "name": "IRU TOMO Reservation",
      "url": "https://irutomoreservation.com",
      "logo": "https://irutomoreservation.com/iru-logo.svg",
      "description": "오사카여행 중 현지인이 추천하는 맛집을 쉽고 빠르게 예약하세요.",
      "sameAs": [
        "https://www.instagram.com/irutomo_reservation",
        "https://www.facebook.com/irutomoReservation"
      ],
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "Japan",
        "addressLocality": "Osaka"
      }
    }
    </script>
    
    <!-- インライン広告ブロッカー検出と代替ロード -->
    <script>
      // PayPal SDK読み込み状態を追跡
      window.paypalSDKLoaded = false;
      window.resourceLoadErrors = [];
      
      // リソース読み込みエラーを監視
      window.addEventListener('error', function(e) {
        // URLからリソースタイプを確認
        var url = e.target && e.target.src || e.filename || '';
        if (!url) return;
        
        // エラーの記録
        window.resourceLoadErrors.push(url);
        
        // PayPalまたは指紋関連のエラーを検出
        if (url.includes('paypal') || url.includes('fingerprint')) {
          console.warn('Payment related script blocked:', url);
          document.body.classList.add('payment-blocked');
        }
      }, true, { capture: true, passive: true });
      
      // 3秒後にPayPal SDKのロード状態を確認
      setTimeout(function() {
        if (!window.paypalSDKLoaded && window.resourceLoadErrors.length > 0) {
          console.warn('Payment scripts may be blocked');
          document.body.classList.add('payment-blocked');
        }
      }, 3000);
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- ブロックされたスクリプトの代替処理 -->
    <script>
      // 変数の重複宣言エラーを防止（このスクリプトはサイトのJSモジュールより先に実行される）
      // テスト用の空オブジェクト/関数を宣言
      window.BrowserInfo = window.BrowserInfo || {};
      window.debug = window.debug || { log: function() {} };
      window.BLOCK_CSS_VALUE = window.BLOCK_CSS_VALUE || {};
      window.BLOCK_TYPES = window.BLOCK_TYPES || {};
      window.ICON_BADGE_PERIODS = window.ICON_BADGE_PERIODS || {};
      window.MESSAGE_TYPES = window.MESSAGE_TYPES || {};
      window.storageService = window.storageService || {};
      window.serverApi = window.serverApi || {};
      window.guidSeed = window.guidSeed || '';
      window.Dialog = window.Dialog || function() {};
      window.Overlay = window.Overlay || function() {};
      window.elementToOverlay = window.elementToOverlay || function() {};
      window.currentWindow = window.currentWindow || window;
      window.observeDomChanges = window.observeDomChanges || function() {};
      window.ExtendedRuleParser = window.ExtendedRuleParser || function() {};
      window.popupScriptEmbedded = window.popupScriptEmbedded || false;
      window.init = window.init || function() {};
      
      // PayPal SDK読み込み成功時のコールバック
      window.paypalSDKLoaded = function() {
        console.log('PayPal SDK loaded successfully');
        window.paypalSDKLoaded = true;
      };
    </script>
  </body>
</html>
